<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${mode} == 'edit' ? '이력서 수정' : '이력서 등록'">이력서 관리</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
    <header>
        <h1 th:text="${mode} == 'edit' ? '이력서 수정' : '이력서 등록'">이력서 관리</h1>
    </header>
    <main>
        <form th:action="@{${mode} == 'edit' ? '/resume/update' : '/resume/register'}" method="post">
            <!-- 기본 정보 -->
            <h2>기본 정보</h2>
            <input type="hidden" name="users_id" th:value="${user?.usersId ?: ''}" />

            <label for="user_name">이름:</label>
            <input type="text" id="user_name" name="user_name" th:value="${user?.userName ?: ''}" readonly><br />

            <label for="phone">연락처:</label>
            <input type="text" id="phone" name="phone" th:value="${user?.phone ?: ''}" readonly><br />

            <!-- 학력 정보 -->
            <h2>학력 정보</h2>
            <div th:each="education, eduStat : ${resume?.educationList}">
                <label for="school_name">학교명:</label>
                <input type="text" id="school_name" name="educationList[${eduStat.index}].schoolName" th:value="${education?.schoolName ?: ''}" required><br />

                <label for="degree">학위:</label>
                <select id="degree" name="educationList[${eduStat.index}].degree" required>
                    <option value="학사" th:selected="${education?.degree == '학사'}">학사</option>
                    <option value="석사" th:selected="${education?.degree == '석사'}">석사</option>
                    <option value="박사" th:selected="${education?.degree == '박사'}">박사</option>
                </select><br />

                <label for="major">전공:</label>
                <input type="text" id="major" name="educationList[${eduStat.index}].major" th:value="${education?.major ?: ''}" required><br />

                <label for="start_date">입학일:</label>
                <input type="date" id="start_date" name="educationList[${eduStat.index}].startDate" th:value="${education?.startDate ?: ''}" required><br />

                <label for="end_date">졸업일:</label>
                <input type="date" id="end_date" name="educationList[${eduStat.index}].endDate" th:value="${education?.endDate ?: ''}"><br />
            </div>

            <!-- 경력 정보 -->
            <h2>경력 정보</h2>
            <div th:each="experience, expStat : ${resume?.experienceList}">
                <label for="company_name">회사명:</label>
                <input type="text" id="company_name" name="experienceList[${expStat.index}].companyName" th:value="${experience?.companyName ?: ''}"><br />

                <label for="job_position">직책:</label>
                <input type="text" id="job_position" name="experienceList[${expStat.index}].jobPosition" th:value="${experience?.jobPosition ?: ''}"><br />

                <label for="exp_start_date">근무 시작일:</label>
                <input type="date" id="exp_start_date" name="experienceList[${expStat.index}].startDate" th:value="${experience?.startDate ?: ''}"><br />

                <label for="exp_end_date">근무 종료일:</label>
                <input type="date" id="exp_end_date" name="experienceList[${expStat.index}].endDate" th:value="${experience?.endDate ?: ''}"><br />
            </div>

            <!-- 자격증 정보 -->
            <h2>자격증 정보</h2>
            <div th:each="certification, certStat : ${resume?.certificationList}">
                <label for="cert_name">자격증 이름:</label>
                <input type="text" id="cer_name" name="certificationList[${certStat.index}].cerName" th:value="${certification?.cerName ?: ''}"><br />

                <label for="issued_by">발급 기관:</label>
                <input type="text" id="issued_by" name="certificationList[${certStat.index}].issuingAuthority" th:value="${certification?.issuingAuthority ?: ''}"><br />
                <label for="issued_date">발급일:</label>
                <input type="date" id="issued_date" name="certificationList[${certStat.index}].issuedDate" th:value="${certification?.issuedDate ?: ''}"><br />
            </div>

            <!-- 병역 정보 -->
            <h2>병역 사항 (선택)</h2>
            <label for="military_class">군별:</label>
            <input type="text" id="military_class" name="military.militaryClass" th:value="${resume?.military?.militaryClass ?: ''}"><br />

            <label for="military_period">복무 기간:</label>
            <input type="text" id="military_period" name="military.militaryPeriod" th:value="${resume?.military?.militaryPeriod ?: ''}"><br />

            <!-- 자기소개서 -->
            <h2>자기소개서</h2>
            <label for="motivation">지원 동기:</label>
            <textarea id="motivation" name="selfIntroduction.motivation" th:text="${resume?.selfIntroduction?.motivation ?: ''}"></textarea><br />

            <label for="career">경력 사항:</label>
            <textarea id="career" name="selfIntroduction.career" th:text="${resume?.selfIntroduction?.career ?: ''}"></textarea><br />

            <label for="personality">성격 및 보유 역량:</label>
            <textarea id="personality" name="selfIntroduction.personality" th:text="${resume?.selfIntroduction?.personality ?: ''}"></textarea><br />

            <button type="submit" th:text="${mode} == 'edit' ? '수정' : '등록'"></button>
        </form>
    </main>
</body>
</html>
